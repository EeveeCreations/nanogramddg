"use strict";(self.webpackChunknanogramddg=self.webpackChunknanogramddg||[]).push([[592],{598:(G,F,l)=>{l.d(F,{h:()=>O});var u=l(978),T=l(414),n=l(19);class d{constructor(r,e,t,s){this._lives=15,this._level=r,this._name=e,this._tiles=t,this._answerTiles=s}get level(){return this._level}set level(r){this._level=r}get name(){return this._name}set name(r){this._name=r}get tiles(){return this._tiles}set tiles(r){this._tiles=r}get lives(){return this._lives}set lives(r){this._lives=r}get answerTiles(){return this._answerTiles}set answerTiles(r){this._answerTiles=r}}class S{constructor(r,e,t){this._x=r,this._y=e,this._isFilled=t}get x(){return this._x}set x(r){this._x=r}get y(){return this._y}set y(r){this._y=r}get isFilled(){return this._isFilled}set isFilled(r){this._isFilled=r}}class v{constructor(r,e,t){this._xFilledSquares=r,this._yFilledSquares=e,this._answerTiles=t}get xFilledSquares(){return this._xFilledSquares}set xFilledSquares(r){this._xFilledSquares=r}get yFilledSquares(){return this._yFilledSquares}set yFilledSquares(r){this._yFilledSquares=r}get answerTiles(){return this._answerTiles}set answerTiles(r){this._answerTiles=r}}var f=l(251);let g=(()=>{class i{constructor(){this.ROWS_COLUMNS=f.N.columns_rows,this.MIN_FILLED_TILES=f.N.minimum,this.FILLED_TILES=2}generateANewBoard(e){const t=this.generateAnswerToBoard(e),s=this.setNewTilesSet();return new d(e,"Level "+e,s,t)}setNewTilesSet(){let e=[[]];for(let t=0;t<this.ROWS_COLUMNS;t++){e[t]=[];for(let s=0;s<this.ROWS_COLUMNS;s++)e[t][s]=new S(t,s,!1)}return e}chooseDifficulty(e){let t=this.ROWS_COLUMNS-this.FILLED_TILES*(e-1);return t<this.MIN_FILLED_TILES&&(t=this.MIN_FILLED_TILES),t}generateAnswerToBoard(e){let t=this.setNewTilesSet(),s=this.chooseDifficulty(e);return this.fillAnswerModel(s,t)}fillAnswerModel(e,t){for(let c in t){let h=this.setFilledAmount(e);for(let w=0;w<=h;w++){let M=Math.round(Math.random()*(this.ROWS_COLUMNS-1)),m=t[c][M];m.isFilled||(m.isFilled=!0)}}const s=this.countFilled(t);return new v(s[0],s[1],t)}setFilledAmount(e){let t=Math.round(Math.random()*e);return t<this.MIN_FILLED_TILES&&(t=this.ROWS_COLUMNS),t}countFilled(e){let t=new Array(this.ROWS_COLUMNS).fill(0),s=new Array(this.ROWS_COLUMNS).fill(0);for(let o of e)for(let a of o)a.isFilled&&(t[a.x]++,s[a.y]++);return[t,s]}startBoard(){return new d(0,"Tutorial",this.setNewTilesSet(),this.fillAllTilesOfBoard())}fillAllTilesOfBoard(){let e=[];for(let t=0;t<this.ROWS_COLUMNS;t++){e[t]=[];for(let s=0;s<this.ROWS_COLUMNS;s++)e[t][s]=new S(t,s,!0)}return new v([225],[225],e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=n.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),L=(()=>{class i{constructor(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=n.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var y=l(396);class _{constructor(r,e){}get name(){return this._name}set name(r){this._name=r}get score(){return this._score}set score(r){this._score=r}}let B=(()=>{class i{constructor(){this.highScoresSubject=new y.x,this.currentScore=new u.X(0)}updateScore(){}addScoreToHighScore(e){this.highScores.push(new _(e,this.currentScore.value))}getHighScores(){return this.highScores}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=n.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var N=l(797);let O=(()=>{class i{constructor(e,t,s,o){this.generateBoardService=e,this.tileService=t,this.scoreService=s,this.routeService=o,this.boardSubject=new u.X(this.generateBoardService.startBoard()),this.scoreSubscription=new T.w0,this.setSubscription()}startNewGame(){this.currentBoard=this.boardSubject.value,this.startNewRound()}startNewRound(){this.currentBoard=this.generateBoardService.generateANewBoard(this.currentBoard.level+1),this.boardSubject.next(this.currentBoard)}setSubscription(){this.scoreSubscription=this.scoreService.currentScore.subscribe(e=>{this.currentScore=e}),this.boardSubject.subscribe(e=>{this.currentBoard=e})}checkIfTileCorrect(e,t){1==this.currentBoard.answerTiles.answerTiles[e][t].isFilled?this.fillTile(e,t):this.inCorrectPlacement()}inCorrectPlacement(){window.alert("This Tile is not correct Think again!"),this.removeLife()}removeLife(){this.currentBoard.lives-=1,0==this.currentBoard.lives&&this.GameOver()}updateLives(){}fillTile(e,t){this.currentBoard.tiles[e][t].isFilled=!0,this.isTheGameWon()&&this.roundWon(),this.boardSubject.next(this.currentBoard)}isTheGameWon(){const e=this.generateBoardService.countFilled(this.currentBoard.tiles),t=this.currentBoard.answerTiles.xFilledSquares,s=this.currentBoard.answerTiles.yFilledSquares,o=e[0].every(function(c,h){return c===t[h]}),a=e[1].every(function(c,h){return c===s[h]});return o&&a}roundWon(){this.sendCongrats()}sendCongrats(){window.confirm("You Found the image! Can you see what it is ?")?3==this.currentBoard.level?this.gameFinished():this.startNewGame():this.leaveTheGame()}gameFinished(){window.confirm("You finnished Level 3! Goodjob!")&&this.leaveTheGame()}GameOver(){window.confirm("you ran out of lives. Do you wan to try again ?")?(this.currentBoard.level=0,this.startNewGame()):this.leaveTheGame()}leaveTheGame(){this.currentBoard.level=0,this.routeService.navigate(["./home"])}}return i.\u0275fac=function(e){return new(e||i)(n.LFG(g),n.LFG(L),n.LFG(B),n.LFG(N.F0))},i.\u0275prov=n.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()}}]);